function beepInit(){beep.audioCtx||(beep.audioCtx=new(window.AudioContext||window.webkitAudioContext),beep([[4186.01,.005]],.01))}function beep(notes,volume,type){beep.audioCtx||beepInit();var audioCtx=beep.audioCtx,bpm=240;(notes=beepCompile(notes))||(notes=[[400,1]]),type||(type="square"),volume||(volume=.5);var timeStart=audioCtx.currentTime,timeCurrent=timeStart,gain=audioCtx.createGain();gain.connect(audioCtx.destination),gain.gain.value=volume/4;var oscillator=audioCtx.createOscillator();oscillator.type=type,oscillator.connect(gain),oscillator.start(timeStart);for(var i=0;i<notes.length;i++){var key=notes[i][0],value=notes[i][1];"vol"!=key?"bpm"!=key?(key?(oscillator.frequency.setValueAtTime(key,timeCurrent),gain.gain.setValueAtTime(volume/4,timeCurrent)):(oscillator.frequency.setValueAtTime(0,timeCurrent),gain.gain.setValueAtTime(0,timeCurrent)),timeCurrent+=240*value/bpm):(console.log("X"),bpm=value):volume=value}oscillator.stop(timeCurrent)}function sound(frequency,duration,volume){duration||(duration=1),beep([[frequency,duration]],volume)}function beepCompile(s){if("string"!=typeof s)return s;var noteList=[],duration=1,gap=0;s=(s=(s=(s=(s=s.replace(/[ ]#[ ].*/g,"")).replace(/\s+/g," ")).trim()).toLowerCase()).split(" ");for(var i=0;i<s.length;i++){if((cur=s[i]).match(/^[cdefgabh-][#b]?[0-9]?$/)){if("-"==cur){noteList.push([0,duration]);continue}cur.match(/[0-9]/)||(cur+="4"),gap&&gap<duration?(noteList.push([cur,duration-gap]),noteList.push([0,gap])):noteList.push([cur,duration])}else if(cur.match(/^[0-9]+(\.[0-9]+)?(\/[0-9]+(\.[0-9]+)?)?$/))duration=1==(cur=cur.split("/")).length?1*cur[0]:cur[0]/cur[1];else if(cur.match(/^(gap|vol|bpm)=[0-9]+(\.[0-9]+)?(\/[0-9]+(\.[0-9]+)?)?$/)){var name=(cur=cur.split("="))[0],value=0;value=1==(cur=cur[1].split("/")).length?1*cur[0]:cur[0]/cur[1],"gap"==name?gap=value:"vol"!=name&&"bpm"!=name||noteList.push([name,value])}}for(i=0;i<noteList.length;i++){var cur=noteList[i];beepNote[cur[0]]?cur[0]=beepNote[cur[0]]:"-"==cur[0]&&(cur[0]=0)}return console.log(noteList),noteList}var beepNote={c8:4186.01,b7:3951.07,"a#7":3729.31,a7:3520,"g#7":3322.44,g7:3135.96,"f#7":2959.96,f7:2793.83,e7:2637.02,"d#7":2489.02,d7:2349.32,"c#7":2217.46,c7:2093,b6:1975.53,"a#6":1864.66,a6:1760,"g#6":1661.22,g6:1567.98,"f#6":1479.98,f6:1396.91,e6:1318.51,"d#6":1244.51,d6:1174.66,"c#6":1108.73,c6:1046.5,b5:987.767,"a#5":932.328,a5:880,"g#5":830.609,g5:783.991,"f#5":739.989,f5:698.456,e5:659.255,"d#5":622.254,d5:587.33,"c#5":554.365,c5:523.251,b4:493.883,"a#4":466.164,a4:440,"g#4":415.305,g4:391.995,"f#4":369.994,f4:349.228,e4:329.628,"d#4":311.127,d4:293.665,"c#4":277.183,c4:261.626,b3:246.942,"a#3":233.082,a3:220,"g#3":207.652,g3:195.998,"f#3":184.997,f3:174.614,e3:164.814,"d#3":155.563,d3:146.832,"c#3":138.591,c3:130.813,b2:123.471,"a#2":116.541,a2:110,"g#2":103.826,g2:97.9989,"f#2":92.4986,f2:87.3071,e2:82.4069,"d#2":77.7817,d2:73.4162,"c#2":69.2957,c2:65.4064,b1:61.7354,"a#1":58.2705,a1:55,"g#1":51.9131,g1:48.9994,"f#1":46.2493,f1:43.6535,e1:41.2034,"d#1":38.8909,d1:36.7081,"c#1":34.6478,c1:32.7032,b0:30.8677,"a#0":29.1352,a0:27.5,bb7:3729.31,ab7:3322.44,gb7:2959.96,eb7:2489.02,db7:2217.46,bb6:1864.66,ab6:1661.22,gb6:1479.98,eb6:1244.51,db6:1108.73,bb5:932.328,ab5:830.609,gb5:739.989,eb5:622.254,db5:554.365,bb4:466.164,ab4:415.305,gb4:369.994,eb4:311.127,db4:277.183,bb3:233.082,ab3:207.652,gb3:184.997,eb3:155.563,db3:138.591,bb2:116.541,ab2:103.826,gb2:92.4986,eb2:77.7817,db2:69.2957,bb1:58.2705,ab1:51.9131,gb1:46.2493,eb1:38.8909,db1:34.6478,bb0:29.1352,h7:3951.07,h6:1975.53,h5:987.767,h4:493.883,h3:246.942,h2:123.471,h1:61.7354,h0:30.8677,hb7:3729.31,hb6:1864.66,hb5:932.328,hb4:466.164,hb3:233.082,hb2:116.541,hb1:58.2705,hb0:29.1352,k88:4186.01,k87:3951.07,k86:3729.31,k85:3520,k84:3322.44,k83:3135.96,k82:2959.96,k81:2793.83,k80:2637.02,k79:2489.02,k78:2349.32,k77:2217.46,k76:2093,k75:1975.53,k74:1864.66,k73:1760,k72:1661.22,k71:1567.98,k70:1479.98,k69:1396.91,k68:1318.51,k67:1244.51,k66:1174.66,k65:1108.73,k64:1046.5,k63:987.767,k62:932.328,k61:880,k60:830.609,k59:783.991,k58:739.989,k57:698.456,k56:659.255,k55:622.254,k54:587.33,k53:554.365,k52:523.251,k51:493.883,k50:466.164,k49:440,k48:415.305,k47:391.995,k46:369.994,k45:349.228,k44:329.628,k43:311.127,k42:293.665,k41:277.183,k40:261.626,k39:246.942,k38:233.082,k37:220,k36:207.652,k35:195.998,k34:184.997,k33:174.614,k32:164.814,k31:155.563,k30:146.832,k29:138.591,k28:130.813,k27:123.471,k26:116.541,k25:110,k24:103.826,k23:97.9989,k22:92.4986,k21:87.3071,k20:82.4069,k19:77.7817,k18:73.4162,k17:69.2957,k16:65.4064,k15:61.7354,k14:58.2705,k13:55,k12:51.9131,k11:48.9994,k10:46.2493,k9:43.6535,k8:41.2034,k7:38.8909,k6:36.7081,k5:34.6478,k4:32.7032,k3:30.8677,k2:29.1352,k1:27.5};